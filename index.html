<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width initial-scale=1">
<link href="/rpapp/style/style5.css" rel="stylesheet">
<link rel="apple-touch-icon" sizes="57x57" href="/rpapp/iconka/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/rpapp/iconka/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/rpapp/iconka/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/rpapp/iconka/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/rpapp/iconka/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/rpapp/iconka/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/rpapp/iconka/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/rpapp/iconka/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/rpapp/iconka/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/rpapp/iconka/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/rpapp/iconka/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/rpapp/iconka/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/rpapp/iconka/favicon-16x16.png">
<link rel="manifest" href="manifest.json">
<meta name="mobile-web-app-capable" content="yes">
<meta name="msapplication-TileColor" content="#E6E6FA">
<meta name="msapplication-TileImage" content="/rpapp/iconka/ms-icon-144x144.png">
<meta name="theme-color" content="#E6E6FA">
<script>
// 3. Add event handler
//button.addEventListener ("click", function() {
//  alert("Click!!!");
//});
 

  
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/rpapp/sw.js').then(function(registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}
 
window.addEventListener('beforeinstallprompt', function(e) {
  // beforeinstallprompt Event fired

  // e.userChoice will return a Promise.
  // For more details read: https://developers.google.com/web/fundamentals/getting-started/primers/promises
  e.userChoice.then(function(choiceResult) {

    console.log(choiceResult.outcome);

    if(choiceResult.outcome == 'dismissed') {
      console.log('User cancelled home screen install');
    }
    else {
      console.log('User added to home screen');
    }
  });
});

var deferredPrompt;
   
window.addEventListener('beforeinstallprompt', function(e) {
  console.log('beforeinstallprompt Event fired');
  e.preventDefault();

  // Stash the event so it can be triggered later.
  deferredPrompt = e;

  return false;
});




  </script>
<title>Progressive Web Apps for Rustam v.1.0</title>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
<script src="https://use.fontawesome.com/4ca20d00e4.js"></script>
</head>
<body>
<p>
<h1>Progressive Web Apps for Rustam v.1.02</h1>
<br />
 <script>
  

var button = document.createElement("button");
//button.innerHTML = "add";
button.className = "butt5";
// 2. Append somewhere
var body = document.getElementsByTagName("body")[0];
body.appendChild(button);




button.addEventListener('click', function() {
  alert("do you wanna install this rpapp?");
  if(deferredPrompt !== undefined) {
    // The user has had a positive interaction with our app and Chrome
    // has tried to prompt previously, so let's show the prompt.
   
   
    deferredPrompt.prompt();

    // Follow what the user has done with the prompt.
    deferredPrompt.userChoice.then(function(choiceResult) {

      console.log(choiceResult.outcome);

      if(choiceResult.outcome == 'dismissed') {
        console.log('User cancelled home screen install');
      }
      else {
        console.log('User added to home screen');
      }
      // We no longer need the prompt.  Clear it up.
      deferredPrompt = null;
    });
  }
});

    
     </script>
  <iframe width = "600" height = "600" src = "https://yar.atel76.ru/" name ="iframe" scrolling = "auto"></iframe> 
 
<br />
<br />
Это первая версия Progressive Web Apps для Рустама
<br />
Моего друга и соратника. 
<br />
<br />
<br />
<a><img alt="goba" title="Progressive Web Apps for Rustam" src="index_files/goba.png"></a>
<br />
<br />
<font color="red">
<a href="https://github.com/goba2000/rpapp">Code on GitHub</a>
</font> 
<br />
<br />
<a><img alt="manual Progressive Web Apps" title="manual Progressive Web Apps" src="man.gif"></a>
<br />  
<br />
<br />
<font color="green">  
Внимание, все права защищены! 
</font> 
<br />
============================
</body>
</html>
